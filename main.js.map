{"version":3,"file":"main.js","mappings":"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","sources":["webpack://trello-dnd/./src/js/taskWidget.js","webpack://trello-dnd/./src/js/app.js","webpack://trello-dnd/./src/index.js"],"sourcesContent":["/* eslint-disable  consistent-return */\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable no-unused-vars */\n/* eslint-disable  no-param-reassign */\n/* eslint-disable  no-plusplus */\n/* eslint-disable  no-lonely-if */\n\nexport default class TaskWidget {\n  constructor(element) {\n    if (typeof element === \"string\") {\n      element = document.querySelector(element);\n    }\n    this._element = element;\n    this.buttons = [...document.querySelectorAll(\".task-widget__button\")];\n    this.columns = [...this._element.querySelectorAll(\".task-widget__column\")];\n    this.crossCode = \"&#10008;\";\n  }\n\n  init() {\n    if (localStorage.getItem(\"taskWidgetMemory\")) {\n      const memory = JSON.parse(localStorage.getItem(\"taskWidgetMemory\"));\n      for (let i = 0; i < this.columns.length; i++) {\n        memory[`column${i}`].forEach((el) => {\n          this.newTask(el, this.columns[i]);\n        });\n      }\n    }\n    this.buttons.forEach((el) => {\n      el.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        this.addNewCard(el);\n      });\n    });\n    window.addEventListener(\"unload\", () => {\n      localStorage.setItem(\"taskWidgetMemory\", `${this.saveTasks()}`);\n    });\n  }\n\n  addNewCard(button) {\n    const addCardForm = document.createElement(\"div\");\n    addCardForm.classList.add(\"add-card__form\");\n    addCardForm.innerHTML = `<textarea class=\"add-card__input\" rows=\"2\"></textarea>\n      <button type=\"button\" class=\"add-card__button\">Add card</button>\n      <button type=\"button\" class=\"add-card__close\">&#215;</button>`;\n    const column = button.closest(\".task-widget__column\");\n    column.appendChild(addCardForm);\n    const input = addCardForm.querySelector(\".add-card__input\");\n    addCardForm\n      .querySelector(\".add-card__close\")\n      .addEventListener(\"click\", () => {\n        addCardForm.closest(\".task-widget__column\").removeChild(addCardForm);\n      });\n    addCardForm\n      .querySelector(\".add-card__button\")\n      .addEventListener(\"click\", () => {\n        this.newTask(input.value, column);\n        addCardForm.closest(\".task-widget__column\").removeChild(addCardForm);\n      });\n  }\n\n  newTask(text, column) {\n    const card = document.createElement(\"div\");\n    card.classList.add(\"task-widget__item\");\n    card.innerText = `${text}`;\n    column.appendChild(card);\n    this.addhoverListeners(card);\n    this.addDnDListeners(card);\n  }\n\n  addhoverListeners(el) {\n    el.addEventListener(\"mouseenter\", () => {\n      document.body.style.cursor = \"pointer\";\n      this.addDeleteButton(el);\n    });\n    el.addEventListener(\"mouseleave\", () => {\n      el.removeChild(el.querySelector(\".task-widget__item--close\"));\n      document.body.style.cursor = \"default\";\n    });\n  }\n\n  addDnDListeners(el) {\n    let draggedEl;\n    let draggedElWidth;\n    let draggedElHeight;\n    let closest;\n    let topCoord;\n    el.addEventListener(\"mousedown\", (evt) => {\n      evt.preventDefault();\n      if (evt.target.className === \"task-widget__item--close\") {\n        return;\n      }\n      draggedEl = evt.target;\n      draggedElWidth = draggedEl.offsetWidth;\n      draggedElHeight = draggedEl.offsetHeight;\n      draggedEl.closest(\".task-widget__column\").removeChild(draggedEl);\n      document.body.style.cursor = \"grabbing\";\n      draggedEl.classList.add(\"task-widget__item--dragged\");\n      draggedEl.style.width = `${draggedElWidth}px`;\n      draggedEl.style.height = `${draggedElHeight}px`;\n      document.body.appendChild(draggedEl);\n      draggedEl.style.left = `${evt.pageX - draggedEl.offsetWidth / 2}px`;\n      draggedEl.style.top = `${evt.pageY - draggedEl.offsetHeight / 2}px`;\n    });\n    el.addEventListener(\"mousemove\", (evt) => {\n      evt.preventDefault();\n      if (!draggedEl) {\n        return;\n      }\n      this._element.querySelectorAll(\".task-widget__item\").forEach((item) => {\n        item.style.marginBottom = \"2px\";\n        item.style.marginTop = \"2px\";\n      });\n      draggedEl.style.left = `${evt.pageX - draggedEl.offsetWidth / 2}px`;\n      draggedEl.style.top = `${evt.pageY - draggedEl.offsetHeight / 2}px`;\n      closest = document\n        .elementsFromPoint(evt.clientX, evt.clientY)\n        .find((item) => item.className === \"task-widget__item\");\n      if (!closest) {\n        return;\n      }\n      topCoord = closest.getBoundingClientRect();\n      if (evt.pageY > window.scrollY + topCoord + closest.offsetHeight / 2) {\n        closest.style.marginBottom = `${draggedElHeight + 2}px`;\n      } else {\n        closest.style.marginTop = `${draggedElHeight + 2}px`;\n      }\n    });\n    el.addEventListener(\"mouseup\", (evt) => {\n      evt.preventDefault();\n      if (!draggedEl) {\n        return;\n      }\n      draggedEl.classList.remove(\"task-widget__item--dragged\");\n      draggedEl.style.width = \"98%\";\n      draggedEl.style.height = \"auto\";\n      draggedEl.style.top = \"auto\";\n      draggedEl.style.left = \"auto\";\n      document.body.removeChild(draggedEl);\n      document.body.style.cursor = \"pointer\";\n      if (!closest) {\n        const parent = document\n          .elementsFromPoint(evt.clientX, evt.clientY)\n          .find((item) => item.className === \"task-widget__column\");\n        parent.appendChild(draggedEl);\n      } else {\n        if (evt.pageY > window.scrollY + topCoord + closest.offsetHeight / 2) {\n          closest.parentNode.insertBefore(\n            draggedEl,\n            closest.nextElementSibling\n          );\n        } else {\n          closest.parentNode.insertBefore(draggedEl, closest);\n        }\n      }\n      this._element.querySelectorAll(\".task-widget__item\").forEach((item) => {\n        item.style.marginBottom = \"2px\";\n        item.style.marginTop = \"2px\";\n      });\n      draggedEl = null;\n      closest = null;\n      topCoord = null;\n    });\n  }\n\n  addDeleteButton(el) {\n    const cross = document.createElement(\"div\");\n    cross.innerHTML = this.crossCode;\n    cross.classList.add(\"task-widget__item--close\");\n    el.appendChild(cross);\n    cross.addEventListener(\"click\", () => {\n      el.closest(\".task-widget__column\").removeChild(el);\n    });\n  }\n\n  saveTasks() {\n    const savedTasks = {};\n    for (let i = 0; i < this.columns.length; i++) {\n      const column = [];\n      this.columns[i].querySelectorAll(\".task-widget__item\").forEach((el) => {\n        const task = el.innerText;\n        column.push(task);\n      });\n      savedTasks[`column${i}`] = column;\n    }\n    return JSON.stringify(savedTasks);\n  }\n}\n","import TaskWidget from \"./taskWidget\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const taskManager = new TaskWidget(document.querySelector(\".task-widget\"));\n  taskManager.init();\n});\n","import \"./js/app\";\nimport \"./css/style.css\";\n"],"names":["TaskWidget","constructor","element","document","querySelector","_element","buttons","querySelectorAll","columns","crossCode","init","localStorage","getItem","memory","JSON","parse","i","length","forEach","el","newTask","addEventListener","e","preventDefault","addNewCard","window","setItem","saveTasks","button","addCardForm","createElement","classList","add","innerHTML","column","closest","appendChild","input","removeChild","value","text","card","innerText","addhoverListeners","addDnDListeners","body","style","cursor","addDeleteButton","draggedEl","draggedElWidth","draggedElHeight","topCoord","evt","target","className","offsetWidth","offsetHeight","width","height","left","pageX","top","pageY","item","marginBottom","marginTop","elementsFromPoint","clientX","clientY","find","getBoundingClientRect","scrollY","remove","parent","parentNode","insertBefore","nextElementSibling","cross","savedTasks","task","push","stringify","taskManager"],"sourceRoot":""}